upstream django {
    server 127.0.0.1:3031;
}
server {
    server_name grader.cs.hut.fi;

    charset utf-8;
    client_max_body_size 50M;

    location /static {
        add_header 'Access-Control-Allow-Origin' '*';
      	add_header 'Access-Control-Allow-Methods' 'GET, OPTIONS';
        alias /srv/grader/mooc-grader/static;
    }
    location /robots.txt {
        alias /srv/grader/mooc-grader/static/robots.txt;
    }
    location /ajax {
        uwsgi_pass django;
        include uwsgi_params;
    }
    location / {

        # If the static content is served public limit grading separately.
        #allow 192.168.1.0/24;
        #deny all;

        uwsgi_pass django;
        include uwsgi_params;
    }
}
